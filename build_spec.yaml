version: 0.1
component: build

steps:
  - type: Command
    name: Make .sh executable
    command: |
      cd MtdrSpring
      find . -type f -name "*.sh" -exec chmod +x {} \;

  - type: Command
    name: docker login
    command: |
      echo "y{YOWwi:N5C]IDm7H6VI" | docker login -u "axe7rjmbgq9x/a00344820@tec.mx" --password-stdin mx-queretaro-1.ocir.io

  - type: Command
    name: Undeploy
    command: |
      cd MtdrSpring/backend
      source undeploy.sh

  - type: Command
    name: Build
    command: |
      cd MtdrSpring/backend
      source build.sh

  - type: Command
    name: Deploy
    command: |
      cd MtdrSpring/backend
      source deploy.sh